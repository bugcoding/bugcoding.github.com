<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="keep coding, keep moving..."><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>快速排序图解</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="author"><div class="author-name"><a href="/">bugcode's note</a></div><div class="about-me">思绪如风，来去匆匆。</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">Archives</a></li><li><a href="/about">About</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/bugcoding"></span><a href="https://github.com/bugcoding" target="_blank" title="https://github.com/bugcoding">https://github.com/bugcoding</a></li><li class="social-item"><span class="label"><img src="/images/socials/rss.svg" alt="https://bugcode.net/atom.xml"></span><a href="https://bugcode.net/atom.xml" target="_blank" title="https://bugcode.net/atom.xml">https://bugcode.net/atom.xml</a></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">快速排序图解</div><span class="date">2015年02月15日</span><span>   </span><span class="tags"><a class="tag-link" href="/tags/Algorithm/">Algorithm</a></span><div class="content"><p>快速排序原理记录及实现，用了几张图示，虽然是篇笔记，但尽力让所有人明白。</p>
<a id="more"></a>
<p>快速排序的原理就是一个数组在单趟的排序中，找到一个基准值，按这个基准值的所在的位置做为分界（下标），这趟排序保证的就是这个基准值位置的左边都是小于（或者大于）基准值的数，而基准值位置的右边都是大于（或者小于）基准值的数，然后再从数组的右边开始扫描，把每个值依次与基准值相比较，大于（或者小于）基准值的值不动，小于（或者大于）基准值的就移到左边，再开始从左边开始扫描， 仍然是把每个值与基准值比较，小于（或者大于）基准值的值不动，大于（或者小于）基准值的值移到右边，接着再进行右边扫描，直到二个扫描下标相遇，这趟排序就完成了，然后再按这个基准值的位置（下标），把这个数组分为左半边与右半边，然后再次使用上面的策略进行排序，这就是快速排序的基本原理，按我的理解就是每一趟的排序找到这个基准值的准确位置（每次确定一个值的排序好之后的位置）。下面看图，一个原始数组，一个左侧的扫描指针，一个右侧的扫描指针，一个基准值，就定为数组0位置的值：</p>
<p><img src="/chapimages/quick_sort_1.png" alt=""></p>
<ol>
<li><p>最开始的数组情况就是这样的。（下面的举例是按数组排序从小到大演示），下面开始第一趟排序，就是如上面所说，右侧扫描指针从右侧开始向左移动，并依次取出对应下标的值与基准做比较，如果值大于基准值，指针向左移，过程就是：</p>
<p>第一次：array[10] &gt; 2,指针向左移。</p>
<p>第二次：array[9] &gt; 2, 指针向左移。</p>
<p>第三次：array[8] &gt; 2, 指针向左移。</p>
<p>第四次：array[7] &gt; 2, 指针向左移。</p>
<p>第五次：array[6] &lt; 2, 第五次的时候，对应下标的值不再大于基准值，那么就开始移动这个值到左侧，接下来的数组就是这样：</p>
<p><img src="/chapimages/quick_sort_2.png" alt=""></p>
</li>
<li><p>下面开始左侧指针移动，并依次取出下标对应的值与基准值做比较，如果小于基准值，指针向右移动，如果大于基准值，那么就开始移动这个值到右侧，过程就是：</p>
<p>第一次：array[0] &lt; 2, 指针右移。</p>
<p>第二次：array[1] &gt; 10, 此次左侧指针下取出的值大于基准值2，那么开始把这个值移动到右侧，数组就变成这样：</p>
<p><img src="/chapimages/quick_sort_3.png" alt=""></p>
</li>
<li><p>左侧移动完成，下面又开始移动右侧，如上所述，大于基准值就左移，直到遇到小于基准值的位置，过程如下：</p>
<p>第一次：array[6] &gt; 2, 指针左移。</p>
<p>第二次：array[5] &gt; 2, 指针左移。</p>
<p>第三次：array[4] &gt; 2, 指针左移。</p>
<p>第四次：array[3] &gt; 2, 指针左移。</p>
<p>第五次：array[2] &lt; 2, 此时指针下取出的值小于基准值，这个值要移动到左侧，数组情况如下：</p>
<p><img src="/chapimages/quick_sort_4.png" alt=""></p>
</li>
<li><p>再次开始移动左侧，小于基准值不动，大于基准值向右移，过程如下：</p>
<p>第一次：array[1] &lt; 2, 指针右移。</p>
<p>第二次：array[2], 此时右侧指针也在array[2]处，此趟排序调整到此完成。</p>
<p>二个指针相遇的地方也就是开始确定基准值应该所在的位置，这趟排序过后数组变成：</p>
<p><img src="/chapimages/quick_sort_5.png" alt=""></p>
</li>
<li><p>也就是像上面所说的，每趟的排序都会把排序好之后的基准值的位置找到。</p>
<p>这是第一趟排序，下面就是使用分治，分别对现在基准值的位置的左半部分与右关部分运用像上面一样的策略来分别排序。</p>
<p>那么根据此原理就可以写出代码，如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> *<span class="built_in">array</span>, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//保证是左右二个部分</span></span><br><span class="line">    <span class="keyword">if</span> (low &lt; high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> left = low;</span><br><span class="line">        <span class="keyword">int</span> right = high;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//找到基准值</span></span><br><span class="line">        <span class="keyword">int</span> base_value = <span class="built_in">array</span>[low];</span><br><span class="line">        <span class="comment">// 确定每次移动都是左侧与右侧不交叉</span></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//右侧指针向左移动</span></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right &amp;&amp; base_value &lt;= <span class="built_in">array</span>[right])</span><br><span class="line">            &#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//找到了小于基准值的值，直接移动左侧</span></span><br><span class="line">            <span class="built_in">array</span>[left] = <span class="built_in">array</span>[right];</span><br><span class="line">            <span class="comment">//开始左侧扫描</span></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right &amp;&amp; base_value &gt;= <span class="built_in">array</span>[left])</span><br><span class="line">            &#123;</span><br><span class="line">               left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//找到大于基准值的值，直接移动到右侧</span></span><br><span class="line">            <span class="built_in">array</span>[right] = <span class="built_in">array</span>[left];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//二个指针相遇，base_value值位置找到</span></span><br><span class="line">        <span class="built_in">array</span>[left] = base_value;</span><br><span class="line">        <span class="comment">//按base_value所在位置分别按上面的策略进行分别处理</span></span><br><span class="line">        quick_sort(<span class="built_in">array</span>, low, left - <span class="number">1</span>);</span><br><span class="line">        quick_sort(<span class="built_in">array</span>, left + <span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> unsort_array[<span class="number">10</span>] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">23</span>, <span class="number">-1</span>, <span class="number">3</span>, <span class="number">19</span>, <span class="number">89</span>, <span class="number">11</span>&#125;;</span><br><span class="line">    quick_sort(unsort_array, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, unsort_array[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这就是快速排序的基本原理与实现图解与代码。</p>
</li>
</ol>
</div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/2015/03/10/归并排序图解.html">归并排序图解</a></li><li>下一篇：<a href="/2015/01/07/Windows下编译Clang.html">Windows下编译Clang</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><center class="span">2014-2018 bugcode.</center></div></footer><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/post.js"></script></body></html>