<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="keep coding, keep moving..."><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>SwiftNote-3</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="author"><div class="author-name"><a href="/">bugcode's note</a></div><div class="about-me">思绪如风，来去匆匆。</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">Archives</a></li><li><a href="/about">About</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/bugcoding"></span><a href="https://github.com/bugcoding" target="_blank" title="https://github.com/bugcoding">https://github.com/bugcoding</a></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">SwiftNote-3</div><span class="date">2016年04月26日</span><span>   </span><span class="tags"><a class="tag-link" href="/tags/Swift/">Swift</a></span><div class="content"><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>基本的运算符与C语言无二致，并且对很多地方做了增强。</p>
<a id="more"></a>
<ul>
<li><p>基本加减乘除，取正负，逻辑运算，组合赋值，比较运算，自增自减，三元运算 均与C语言完全一致，且swift加了类型数据溢出的检测。运算结果超出类型的最大值会给出提示</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> addNum = <span class="type">Int32</span>.<span class="built_in">max</span></span><br><span class="line"><span class="keyword">var</span> res:<span class="type">Int32</span> = addNum + <span class="number">1</span> <span class="comment">// 这里会给出提示，因为res已放不下Int32的最大值 + 1的数据</span></span><br></pre></td></tr></table></figure>
<p><strong>赋值运算的形式与C语言相同，但是swift的赋值不会返回值，也就是swift里不能像C语言中一样进行连续赋值，也不能在if判定里做赋值操作</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> assign:<span class="type">Int</span></span><br><span class="line"><span class="keyword">if</span> assign = res <span class="comment">// 这里会报语法错误</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>增强的取余操作，可以对浮点数进行取余</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = <span class="number">8</span> % <span class="number">2.5</span> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">"remainder = \(res)"</span>) <span class="comment">// 此时res == 0.5   8 = 3 * 2.5 + 0.5</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>针对可选类型加入<strong>空合</strong>运算符(<strong>??</strong>)，形式是a ?? b， a必须是可选类型，b必须是可选类型内容的值类型</p>
<p>意思就是如果可选值a是nil，则会取b的值，就是简单化的三元运算符的操作。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> optionStr:<span class="type">String</span>? = <span class="string">"optional"</span></span><br><span class="line"><span class="keyword">var</span> optionInt:<span class="type">Int32</span>? <span class="comment">// 此时optionInt == nil</span></span><br><span class="line"><span class="keyword">var</span> resStr = optionStr ?? <span class="string">"NotReachHere"</span> <span class="comment">// optionStr非空，取optionStr的值</span></span><br><span class="line"><span class="keyword">var</span> resInt = optionInt ?? <span class="number">42</span> <span class="comment">// optionInt为空，取42赋给resInt</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>区间运算符 <strong>..&lt;</strong> 与<strong>…</strong>，分别表示半开区间与闭区间</p>
<blockquote>
<p>1 ..&lt; 6 表示 1 2 3 4 5</p>
<p>1 … 6 表示 1 2 3 4 5 6</p>
</blockquote>
</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li><p>字符串字面量</p>
<p>由双引号括起来的一组Unicode字符集合(Swift中单个字符都是Unicode的形式)。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringDemo:<span class="type">String</span> = <span class="string">"swift string demo"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>空串构造</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringEmpty = <span class="string">""</span> <span class="comment">// 直接使用空字符串初始化swift字符串</span></span><br><span class="line"><span class="keyword">var</span> anotherEmptyStr = <span class="type">String</span>() <span class="comment">//  使用swift的默认字符串构造</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串构成</p>
<p>Swift字符串都是单个Unicode字符构成，在Swift里是<strong>Character</strong>字符类型，可以使用字符串的<strong>characters</strong>属性来访问单个的String内部的Character字符集合，并可以通过for in的形式迭代出来</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringDemo = <span class="string">"雨燕 Swift"</span></span><br><span class="line"><span class="comment">// for .. in的形式遍历整个string</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> stringDemo.characters </span><br><span class="line">&#123;</span><br><span class="line">  	<span class="built_in">print</span>(<span class="string">"Single Character = \(char)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取字符串的长度需要使用字符串的characters属性内的count属性</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stringForTest = <span class="string">"SwiftTesting"</span></span><br><span class="line"><span class="comment">// 使用characters属性里的count属性获取共有多少个Unicode字符，即字符串的长度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"string length = \(stringForTest.characters.count)"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串比较</p>
<p>使用通用的等于与不等于来进行字符串比较，通用的比较操作符 (<strong>!=</strong> 与<strong>==</strong>)</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string1 = <span class="string">"swift"</span></span><br><span class="line"><span class="keyword">let</span> string2 = <span class="string">"bugcode"</span></span><br><span class="line"><span class="keyword">if</span> string1 != string2</span><br><span class="line">&#123;</span><br><span class="line">  	<span class="built_in">print</span>(<span class="string">"\(string1) is not same to \(string2)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift提供字符串前缀与后缀的比较方法，分别是hasPrefix, hasSuffix</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prefixStr = <span class="string">"http://bugcode.net"</span></span><br><span class="line"><span class="keyword">if</span> prefixStr.hasPrefix(<span class="string">"http://"</span>)</span><br><span class="line">&#123;</span><br><span class="line">  	<span class="built_in">print</span>(<span class="string">"\(prefixStr) has prefix \'http://\'"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> prefixStr.hasSuffix(<span class="string">"net"</span>)</span><br><span class="line">&#123;</span><br><span class="line">  	<span class="comment">// logic statements</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字符串插值，swift可以在字符串内以<strong>\()</strong>的形式来对其他格式的数据进行格式化。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> intDemo:<span class="type">Int32</span> = <span class="number">42</span></span><br><span class="line"><span class="keyword">let</span> floatDemo:<span class="type">Float</span> = <span class="number">10.2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"string is \(intDemo) \(floatDemo)"</span>) <span class="comment">// intDemo和floatDemo会被转换成字符串的形式</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串的访问与修改，因为swift的字符串采用的是Unicode的形式，每个的字符的长度是不一定的，所以牵引到某个字符需要从头对字符串进行索引查找，不可以像元组那样用String.index的方式来访问。Swift提供了一系列的访问属性和修改字符串的方法，并且可以按索引进行访问和修改，也可以按区间进行访问和修改。</p>
<p>startIndex 字符串第一个位置，endIndex 字符串最后一个位置的下一个位置，并不是有有效的String索引，字符的查找索引修改都基于这二个属性来操作。</p>
<p><em>可以独列一节来记录</em></p>
</li>
<li><p>获取字符串对应的utf的表示形式</p>
<ol>
<li><p>utf-8与utf-16的utf形式直接使用字符串的utf8与utf16属性</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> utfStyleStr = <span class="string">"SwiftString"</span></span><br><span class="line">utfStyleStr.utf8</span><br><span class="line">utfStyleStr.utf16</span><br></pre></td></tr></table></figure>
</li>
<li><p>utf-32的使用unicodeScalars的集合属性来访问</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> utf32Str = <span class="string">"utf32"</span></span><br><span class="line">utf32.unicodeScalars <span class="comment">// 可通过for..in来遍历</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
</div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/2016/04/27/SwiftNote-4.html">SwiftNote-4</a></li><li>下一篇：<a href="/2016/04/24/SwiftNote-2.html">SwiftNote-2</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><center class="span">2014-2018 bugcode.</center></div></footer><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/post.js"></script></body></html>