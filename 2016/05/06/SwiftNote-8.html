<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="keep coding, keep moving..."><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>SwiftNote-8</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="author"><div class="author-name"><a href="/">bugcode's note</a></div><div class="about-me">思绪如风，来去匆匆。</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">Archives</a></li><li><a href="/about">About</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/bugcoding"></span><a href="https://github.com/bugcoding" target="_blank" title="https://github.com/bugcoding">https://github.com/bugcoding</a></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">SwiftNote-8</div><span class="date">2016年05月06日</span><span>   </span><span class="tags"><a class="tag-link" href="/tags/Swift/">Swift</a></span><div class="content"><p>类的属性</p>
<p>相当于其他编程语言中的类成员变量，在Swift中叫做属性。</p>
<a id="more"></a>
<h2 id="存储型属性"><a href="#存储型属性" class="headerlink" title="存储型属性"></a>存储型属性</h2><p>相当于普通成员，用于类实例中变量/常量，实例可以通过点号的方式来访问/修改</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span> = <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="type">Person</span>()</span><br><span class="line">p.name = <span class="string">"Jack"</span></span><br></pre></td></tr></table></figure>
<p>name就是普通的存储属性，可以通过实例直接访问和修改，需要注意的是生成一个常量结构体实例，即使里面的存储属性是var定义的，也不能通过结构体实例来修改属性值，因为结构体是值类型</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp:<span class="type">Int32</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> t = <span class="type">Test</span>()</span><br><span class="line"><span class="comment">// 即使temp是变量，也不能用t.temp = 12来修改实例内的属性值</span></span><br><span class="line"><span class="comment">// t.temp = 12 这里直接报错</span></span><br></pre></td></tr></table></figure>
<p>延迟存储属性，使用<strong>lazy</strong>关键字，表示此存储属性被访问的时候才会被求值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LazyTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> lazyVar = <span class="number">12</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazyDemoTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> lt = <span class="type">LazyTest</span>()</span><br><span class="line">    <span class="keyword">var</span> dict:[<span class="type">Int</span>:<span class="type">String</span>] = [:]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 此时LazyDemoTest中的lt还没有创建出来</span></span><br><span class="line"><span class="keyword">var</span> ldt = <span class="type">LazyDemoTest</span>()</span><br><span class="line"><span class="comment">// 这时lt才被计算创建</span></span><br><span class="line"><span class="built_in">print</span>(ldt.lt.lazyVar)</span><br></pre></td></tr></table></figure>
<h2 id="计算型属性"><a href="#计算型属性" class="headerlink" title="计算型属性"></a>计算型属性</h2><p>不能直接通过类，结构体，枚举实例来访问/修改的属性，但是提供了一个<strong>getter</strong>与一个可选的<strong>setter</strong>来访问和修改属性的值，这样的属性叫计算型属性。只有<strong>getter</strong>的叫只读属性，因为只能获取值，不能设置值。<strong>setter</strong>不设置新值的名字时默认使用<strong>newValue</strong>这个变量就可以访问新设置的值。计算型属性一定是var定义的，因为常量不可以修改。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cube</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> len = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> area:<span class="type">Double</span>&#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> len * len</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(newArea) <span class="comment">// 可以不设置新值名称，默认使用newValue</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"newValue = \(newArea)"</span>)</span><br><span class="line">            len = sqrt(newArea)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cube = <span class="type">Cube</span>(len: <span class="number">10.0</span>)</span><br><span class="line"><span class="built_in">print</span>(cube.area)</span><br><span class="line">cube.area = <span class="number">200</span></span><br><span class="line"><span class="built_in">print</span>(cube.len)</span><br></pre></td></tr></table></figure>
<p>只读属性，甚至get还可以省略，直接大括号内返回语句就可以了。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rect</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> wid = <span class="number">0.0</span>, hgt = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> area:<span class="type">Double</span>&#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> wid * hgt</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    // 可以省略掉get</span></span><br><span class="line"><span class="comment">    var area:Double&#123;</span></span><br><span class="line"><span class="comment">  		return wid * hgt</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rect = <span class="type">Rect</span>()</span><br><span class="line">rect.hgt = <span class="number">10</span></span><br><span class="line">rect.wid = <span class="number">12</span></span><br><span class="line"><span class="built_in">print</span>(rect.area)</span><br><span class="line"><span class="comment">//rect.area = 100 // 报错，只有get，没有setter，不能设置其值</span></span><br></pre></td></tr></table></figure>
<h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><p>就是在属性值设置之前/设置完被调用，这样就可以监控属性值的变化，分别用<strong>didSet</strong>和<strong>willSet</strong>，从名字上就能猜到功能。<strong>willSet</strong>传入将要设置的新值，不提供名称使用<strong>newValue</strong>，<strong>didSet</strong>传入旧的值(被设置之前的属性值)，不提供名称使用<strong>oldValue</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Wallet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> totalMoney:<span class="type">Float</span> = <span class="number">0.0</span>&#123;</span><br><span class="line">        <span class="keyword">willSet</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"totalMoney = \(newValue) called from willSet"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span>(haveMoney)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"oldValue = \(haveMoney) called from didSet"</span>)</span><br><span class="line">            <span class="keyword">if</span> totalMoney &gt; haveMoney</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"Add \(totalMoney - haveMoney)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果在属性观察器里再次进行对本属性进行属性，这会替换掉之前设置的值</span></span><br><span class="line">			<span class="comment">// totalMoney = 10.0 // 此时实例中的totalMoney已经变成了10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wallet = <span class="type">Wallet</span>(totalMoney: <span class="number">100</span>)</span><br><span class="line">wallet.totalMoney = <span class="number">120</span> <span class="comment">// willSet和didSet都被调用</span></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">// totalMoney = 120.0 called from willSet</span></span><br><span class="line"><span class="comment">// oldValue = 100.0 called from didSet</span></span><br><span class="line"><span class="comment">// Add 20.0</span></span><br></pre></td></tr></table></figure>
<h2 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h2><p>也就是类型C++的静态成员变量，不属于实例，属性类级别所有，用类名来访问，Swift也相同，同样是用<strong>static</strong>关键字来定义，className.staticVarName方式来访问和修改，同样也支持计算属性，针对类而言，如果子类需要重写父类属性实现，需要使用<strong>class</strong>关键字来代替<strong>static</strong>关键字。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaticDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> staticInt:<span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> staticString:<span class="type">String</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"StaticString"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 支持子类重写此属性</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">needOverrideVariable</span>:<span class="title">Bool</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">StaticDemo</span>.staticInt = <span class="number">12</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">StaticDemo</span>.staticString)</span><br></pre></td></tr></table></figure>
</div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/2016/05/09/SwiftNote-9.html">SwiftNote-9</a></li><li>下一篇：<a href="/2016/05/05/SwiftNote-7.html">SwiftNote-7</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><center class="span">2014-2018 bugcode.</center></div></footer><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/post.js"></script></body></html>