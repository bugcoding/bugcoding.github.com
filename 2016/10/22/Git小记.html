<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="keep coding, keep moving..."><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Git小记(基础命令)</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="author"><div class="author-name"><a href="/">bugcode's note</a></div><div class="about-me">思绪如风，来去匆匆。</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">Archives</a></li><li><a href="/about">About</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/bugcoding"></span><a href="https://github.com/bugcoding" target="_blank" title="https://github.com/bugcoding">https://github.com/bugcoding</a></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">Git小记(基础命令)</div><span class="date">2016年10月22日</span><span>   </span><span class="tags"><a class="tag-link" href="/tags/Git/">Git</a></span><div class="content"><p>之前用Git都是直接使用SourceTree这个开源的Git图形界面的客户端，输入log，提交，从远程pull更新，都是点几下按钮，从来没有在命令行里面操作过Git，开始bugcodeCalendar这个项目之后，开始尝试完全用命令行进行Git的操作，四月份开始的这个小项目，一直到现在，断断续续的业余时间也有几个月了，现在命令行里操作Git算是『行动自如』了，这里对这几个月的使用总结一下，也算备忘吧。</p>
<a id="more"></a>
<h4 id="创建仓库，添加文件，提交"><a href="#创建仓库，添加文件，提交" class="headerlink" title="创建仓库，添加文件，提交"></a>创建仓库，添加文件，提交</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init  # 把当前目录当做Git仓库</span><br><span class="line">git add filename1,filename2 # 可以多个文件名，也可以使用通配符号</span><br><span class="line">git commit -m "提交注释" # 将已add的文件都提交到仓库</span><br><span class="line"><span class="meta">#</span><span class="bash"> 还可以像下面这样直接add并提交，commit的时候加入-a参数</span></span><br><span class="line">git commit -am "提交注释" # 会把当前没有add的文件先add再提交</span><br></pre></td></tr></table></figure>
<h4 id="查看工作区状态"><a href="#查看工作区状态" class="headerlink" title="查看工作区状态"></a>查看工作区状态</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status # 会显示当前工作区中的哪些修改，增加，删除，显示未被版本管理的文件</span><br></pre></td></tr></table></figure>
<h4 id="Log，回退，HEAD"><a href="#Log，回退，HEAD" class="headerlink" title="Log，回退，HEAD"></a>Log，回退，HEAD</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git log 各种参数 # log后面参数可以自定义，可以参照文档定制自己需要的</span><br><span class="line">git reset --hard 提交的id # 重置文件内容到某个提交</span><br></pre></td></tr></table></figure>
<h4 id="工作区，暂存区概念"><a href="#工作区，暂存区概念" class="headerlink" title="工作区，暂存区概念"></a>工作区，暂存区概念</h4><p>下图展示了工作区，暂存区，仓库的关系，以及何种操作对应文件在什么区</p>
<p><img src="/chapimages/git_pic.jpg" alt=""></p>
<h4 id="回退修改"><a href="#回退修改" class="headerlink" title="回退修改"></a>回退修改</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- 文件名 # 根据上面的图可知，是从暂存区恢复至工作区</span><br><span class="line">git resetHEAD 文件名 # 从仓库中恢复到暂存区</span><br></pre></td></tr></table></figure>
<h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm 文件名</span><br><span class="line">rm 文件名 &amp;&amp; git commit</span><br></pre></td></tr></table></figure>
<h4 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch # 查看所有分支</span><br><span class="line">git branch 分支名字 # 创建分支</span><br><span class="line">git checkout 分支名字 # 切换分支</span><br><span class="line">git checkout -b 分支名字 # 创建同时切换到对应的分支</span><br><span class="line">git merge 分支名字 # 合并一个分支到当前所在分支</span><br><span class="line">git branch -d 分支名字 # 删除一个指定的分支</span><br></pre></td></tr></table></figure>
<h4 id="暂存，恢复"><a href="#暂存，恢复" class="headerlink" title="暂存，恢复"></a>暂存，恢复</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash # 将当前工作区改动暂存起来，把工作区变为clean状态</span><br><span class="line">git stash apply # 将暂存的改恢复到工作区</span><br></pre></td></tr></table></figure>
<h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git tag # 查看所有标签</span><br><span class="line">git tag 标签名字  # 创建一个标签，默认HAED</span><br><span class="line">git tag -a 标签名字 -m "标签信息" # 指定标签信息</span><br><span class="line">git tag -s 标签名字 -m "标签信息" # 给标签签名</span><br><span class="line">git push origin 标签名字 # 向远程仓库推送一个标签</span><br><span class="line">git push origin --tags  # 把所有没推送的标签都推送到远程仓库</span><br><span class="line">git tag -d 标签名字 # 删除一个本地标签</span><br><span class="line">git push origin :refs/tags/标签名字 # 删除远程标签</span><br></pre></td></tr></table></figure>
<h4 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git diff # 比较当前工作区与暂存区的不同</span><br><span class="line">git diff --cached # 比较的是暂存区与仓库最新提交的版本的不同</span><br><span class="line">git diff HEAD/提交id # 比较当前工作区+暂存区与仓库某个版本的不同</span><br><span class="line">git diff 提交id..提交id # 比较二次提交之间的不同，提交id如果省略，默认是HEAD</span><br><span class="line">git diff master..branch # 比较二个分支的不同</span><br></pre></td></tr></table></figure>
<p>git diff还有更多选项更多可定制的比较，具体可参照diff help。</p>
<h4 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a><strong><em>小技巧</em></strong></h4><p>经常有这种需要，开了一个feature分支，添加了二个功能，结果一个功能写完了，另一个写到一半，要把这个已经写完的一个功能合并到主干上去，但是又不能像这样<code>git merge feature</code>直接合并分支，因为另一个功能只进行到一半。目的很明确只想把feature分支上的某几个文件合并到master上，可以这样：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master # 切到主干</span><br><span class="line">git checkout feature aFile,bFile,cFile # 将对应文件直接checkout到当前分支</span><br></pre></td></tr></table></figure>
<p>如是abc文件是新增的，这样没什么问题，如果cFile在master也有，并且做了修改，那这样就会把master上对应修改给覆盖掉，继续，从master创建一个临时分支，再把feature对应文件checkout到临时分支上去，再把临时分支合并回master，这样就达到了合并某分支的某几个文件到某分支的目的了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git checkout -b masterhelper</span><br><span class="line">git checkout feature aFile,bFile,cFile</span><br><span class="line">git checkout master</span><br><span class="line">git merge masterhelper</span><br><span class="line">git branch -d masterhelper</span><br></pre></td></tr></table></figure></div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/2017/01/30/那些童年通关几十遍的游戏们.html">那些童年通关几十遍的游戏们</a></li><li>下一篇：<a href="/2016/09/17/一些用到不多却很有用的C语语言特性.html">几个用到不多却很有用的C语言特性和小Tricky</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><center class="span">2014-2018 bugcode.</center></div></footer><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/jquery.min.js"></script><script src="/script/index.js"></script><script src="/script/post.js"></script></body></html>